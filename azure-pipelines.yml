# C/C++ with GCC
# Build your C/C++ project with GCC using make.
# Add steps that publish test results, save build artifacts, deploy, and more:
# https://docs.microsoft.com/azure/devops/pipelines/apps/c-cpp/gcc

pool:
  vmImage: 'vs2017-win2016'

steps:
- powershell: |
    $Currentlocation=Get-Location
    Write-Host "Installing Craft"
    .\install_craft.ps1
    Write-Host "Add glabels to Craft"
    mkdir "C:\CraftRoot\etc\blueprints\locations\craft-blueprints-kde\qt-apps\glabels-qt"
    Write-Host "Restore PWD"
    cd -Path $Currentlocation
    Copy-Item "glabels-qt.py" -Destination "C:\CraftRoot\etc\blueprints\locations\craft-blueprints-kde\qt-apps\glabels-qt"
    Write-Host "Activating craft"
    C:\CraftRoot\craft\craftenv.ps1
    Write-Host "Build glabels-qt"
    craft glabels-qt
    craft --package glabels-qt
    
  displayName: 'Build'
